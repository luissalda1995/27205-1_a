<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Function Visualizer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plotly.js-dist@2.17.1/plotly.min.js">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        #graph-container { width: 100%; height: 400px; }
        .controls { margin: 20px 0; }
        input, button { margin: 5px; padding: 10px; }
    </style>
</head>
<body>
    
<div class="controls">
    <input type="text" id="functionInput" placeholder="Enter function: e.g., x^2">
    <button onclick="plotFunction()">Plot</button>
    <button onclick="zoomIn()">Zoom In</button>
    <button onclick="zoomOut()">Zoom Out</button>
</div>
<div id="graph-container"></div>
<script>
    let graphDiv = document.getElementById('graph-container');
    let layout = {
        title: 'Function Plot',
        xaxis: {title: 'X Axis'},
        yaxis: {title: 'Y Axis'}
    };
    let plotlyConfig = {responsive: true};

    function plotFunction() {
        let expr = document.getElementById('functionInput').value;
        let x = Array.from({length: 100}, (_, i) => i / 10 - 5); // Generate x values
        let y = x.map(x => {
            try {
                return eval(expr.replace(/x/g, '(' + x + ')')); // Unsafe eval, use a math parser in production
            } catch (e) {
                return NaN;
            }
        });

        let data = [{
            x: x,
            y: y,
            type: 'scatter',
            mode: 'lines',
            name: 'f(x)'
        }];

        Plotly.newPlot(graphDiv, data, layout, plotlyConfig);
        // Here you would calculate and add traces for maxima, minima, etc.
    }

    function zoomIn() {
        let update = { 'xaxis.range': [graphDiv.layout.xaxis.range[0] + 1, graphDiv.layout.xaxis.range[1] - 1] };
        Plotly.relayout(graphDiv, update);
    }

    function zoomOut() {
        let update = { 'xaxis.range': [graphDiv.layout.xaxis.range[0] - 1, graphDiv.layout.xaxis.range[1] + 1] };
        Plotly.relayout(graphDiv, update);
    }

    // Initial plot
    plotFunction();
</script>

</body>
</html>